{{ $homeoffset := eq hugo.Context.MarkupScope "home" | int }}
{{ $level := add .Level site.Params.headingoffset | math.Max 1 | add $homeoffset | math.Min 6 }}
{{ $anchor := safeURL .Anchor }}

<h{{ $level }} id="{{ $anchor }}">
  <a class="Heading-link u-clickable" href="{{ .Page.RelPermalink }}#{{ $anchor }}">{{ safeHTML .Text }}</a>
</h{{ $level }}>
